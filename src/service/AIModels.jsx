import { GoogleGenerativeAI } from "@google/generative-ai";

  
  const apiKey = import.meta.env.VITE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash-exp",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  

    export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget. Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and suggest itinerary with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, rating. Time travel each of the location for 3 days with each day plan with best time to visit in JSON format."},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here's a budget-friendly 3-day Las Vegas travel plan for a couple, designed with JSON format output, including hotel options and an itinerary:\n\n```json\n{\n  \"tripName\": \"Las Vegas Budget Getaway\",\n  \"duration\": \"3 Days\",\n  \"travelers\": \"Couple\",\n  \"budget\": \"Cheap\",\n  \"currency\": \"USD\",\n  \"hotels\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": {\n        \"min\": 40,\n        \"max\": 80,\n        \"unit\": \"per night\"\n      },\n      \"hotelImageUrl\": \"https://www.circuscircus.com/wp-content/uploads/2023/09/CC_2023_Exterior_Hero_Desktop-1920x1080.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1379,\n        \"longitude\": -115.1659\n      },\n      \"rating\": 3.5,\n      \"description\": \"Affordable option with a fun, family-friendly atmosphere. Features a circus theme, Adventuredome indoor theme park, and various dining choices.\"\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n        \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n        \"price\": {\n          \"min\": 45,\n          \"max\": 90,\n          \"unit\": \"per night\"\n         },\n        \"hotelImageUrl\": \"https://www.excalibur.com/content/dam/excalibur/hotel/exterior/excalibur-exterior-night-1280x640.jpg.pagespeed.ce.E9m6kQG75m.jpg\",\n        \"geoCoordinates\": {\n          \"latitude\": 36.0986,\n          \"longitude\": -115.1743\n        },\n        \"rating\": 3.8,\n        \"description\": \"Medieval-themed hotel on the Strip offering budget-friendly rooms, a pool area, and entertainment options.\"\n     },\n      {\n      \"hotelName\": \"OYO Hotel and Casino Las Vegas\",\n      \"hotelAddress\": \"115 E Tropicana Ave, Las Vegas, NV 89109\",\n      \"price\": {\n        \"min\": 35,\n        \"max\": 70,\n        \"unit\": \"per night\"\n      },\n      \"hotelImageUrl\": \"https://www.oyolasvegas.com/wp-content/uploads/2023/04/Oyo-Hotel-Casino-Las-Vegas-Exterior-2.jpg\",\n       \"geoCoordinates\": {\n          \"latitude\": 36.1016,\n          \"longitude\": -115.1717\n       },\n       \"rating\": 3.2,\n       \"description\": \"A budget-conscious choice close to the Strip, offering basic amenities and a casino.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"Exploring the Strip on a Budget\",\n      \"bestTimeToVisit\": \"Morning and Evening\",\n      \"places\": [\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Gardens\",\n          \"placeDetails\": \"Stunning display of floral art that changes seasonally. Free to enter.\",\n           \"placeImageUrl\": \"https://www.bellagio.com/content/dam/MGM/bellagio/conservatory-botanical-gardens/BGA_Conservatory_Winter_2022_1280x640.jpg.pagespeed.ce.w0aX-7r-jW.jpg\",\n           \"geoCoordinates\": {\n            \"latitude\": 36.1127,\n            \"longitude\": -115.1742\n          },\n          \"ticketPricing\": {\n            \"price\": 0,\n            \"unit\": \"USD\"\n          },\n           \"rating\": 4.7,\n           \"timeTravel\":\"15 Minutes from Hotel\"\n        },\n         {\n          \"placeName\": \"Fountains of Bellagio\",\n          \"placeDetails\": \"Iconic water show with music and lights. Free to view.\",\n           \"placeImageUrl\": \"https://assets.mgmresorts.com/content/dam/MGM/bellagio/entertainment/fountains-of-bellagio/bg-fountains-of-bellagio-1280x640.jpg.pagespeed.ce.x9a-Uu8J9c.jpg\",\n           \"geoCoordinates\": {\n            \"latitude\": 36.1128,\n            \"longitude\": -115.1739\n          },\n          \"ticketPricing\": {\n            \"price\": 0,\n            \"unit\": \"USD\"\n          },\n          \"rating\": 4.8,\n          \"timeTravel\":\"2 minutes from Botanical Gardens\"\n        },\n        {\n          \"placeName\": \"High Roller Observation Wheel\",\n          \"placeDetails\": \"Take in a panoramic view of Las Vegas from this towering ferris wheel.\",\n          \"placeImageUrl\":\"https://www.caesars.com/content/dam/clv/Property/HighRoller/hr-daytime-wheel-view-1280x640.jpg.pagespeed.ce.LpZp5wFp-k.jpg\",\n           \"geoCoordinates\": {\n            \"latitude\": 36.1167,\n            \"longitude\": -115.1691\n           },\n          \"ticketPricing\": {\n              \"price\": 28,\n              \"unit\": \"USD\"\n          },\n          \"rating\": 4.5,\n           \"timeTravel\":\"10 minutes from Fountains of Bellagio\"\n        },\n           {\n            \"placeName\": \"Mirage Volcano\",\n            \"placeDetails\": \"Watch a dramatic volcano eruption with fire and smoke. Free to view.\",\n             \"placeImageUrl\": \"https://res.cloudinary.com/simpleview/image/upload/v1589400228/clients/lasvegas/mirage_volcano_night_01_419b6952-4277-4e19-b00e-56f3574c4c1a.jpg\",\n            \"geoCoordinates\": {\n              \"latitude\": 36.1223,\n              \"longitude\": -115.1722\n            },\n              \"ticketPricing\": {\n                 \"price\": 0,\n                 \"unit\": \"USD\"\n               },\n              \"rating\": 4.6,\n              \"timeTravel\":\"15 Minutes from High Roller\"\n         }\n      ]\n    },\n      \"day2\": {\n        \"theme\": \"Downtown & Off-Strip Fun\",\n          \"bestTimeToVisit\": \"Afternoon and Evening\",\n          \"places\": [\n            {\n              \"placeName\": \"Fremont Street Experience\",\n              \"placeDetails\": \"Pedestrian mall with a light canopy, street performers, and free concerts.\",\n              \"placeImageUrl\": \"https://vegasexperience.com/wp-content/uploads/2023/09/Fremont-Street-Experience-Website-Hero-Image.jpg\",\n                \"geoCoordinates\": {\n                  \"latitude\": 36.1702,\n                  \"longitude\": -115.1411\n               },\n             \"ticketPricing\": {\n                 \"price\": 0,\n                 \"unit\":\"USD\"\n               },\n               \"rating\": 4.4,\n               \"timeTravel\":\"20 Minutes from Hotel\"\n            },\n            {\n            \"placeName\": \"Container Park\",\n            \"placeDetails\": \"Unique shopping and entertainment center made of shipping containers, with a playground for kids.\",\n            \"placeImageUrl\":\"https://downtowncontainerpark.com/wp-content/uploads/2023/06/containerpark_web_7.jpg\",\n              \"geoCoordinates\": {\n                 \"latitude\": 36.1690,\n                 \"longitude\": -115.1385\n             },\n              \"ticketPricing\": {\n                  \"price\": 0,\n                  \"unit\":\"USD\"\n              },\n                \"rating\": 4.3,\n               \"timeTravel\":\"5 Minutes from Fremont Street\"\n             },\n             {\n               \"placeName\": \"The Mob Museum\",\n               \"placeDetails\": \"Interactive museum detailing the history of organized crime. Optional, but worth it for history buffs.\",\n               \"placeImageUrl\": \"https://themobmuseum.org/wp-content/uploads/2021/05/MobMuseum_exterior_1920x1080-1024x576.jpg\",\n                \"geoCoordinates\": {\n                 \"latitude\": 36.1695,\n                \"longitude\": -115.1444\n             },\n             \"ticketPricing\": {\n               \"price\": 30,\n                \"unit\": \"USD\"\n              },\n               \"rating\": 4.6,\n               \"timeTravel\":\"10 Minutes from Container Park\"\n           },\n            {\n              \"placeName\":\"Gold & Silver Pawn Shop\",\n              \"placeDetails\":\"Famous pawn shop from the TV show \\\"Pawn Stars.\\\" (Just outside the main Downtown area)\",\n               \"placeImageUrl\":\"https://media-cdn.tripadvisor.com/media/photo-s/0a/a6/92/37/gold-silver-pawn-shop.jpg\",\n              \"geoCoordinates\":{\n                 \"latitude\": 36.1616,\n                 \"longitude\":-115.1550\n              },\n             \"ticketPricing\": {\n                \"price\": 0,\n                \"unit\": \"USD\"\n               },\n              \"rating\": 4.2,\n               \"timeTravel\": \"15 Minutes from Mob Museum\"\n             }\n      ]\n     },\n    \"day3\": {\n        \"theme\": \"Relaxation and Departure\",\n        \"bestTimeToVisit\":\"Morning\",\n        \"places\": [\n        {\n            \"placeName\": \"Pool Time (Hotel)\",\n            \"placeDetails\": \"Enjoy the hotel pool area before checking out. Many hotels have pools even for budget options\",\n            \"placeImageUrl\": \"https://i.pinimg.com/originals/14/d0/2e/14d02ef62d43d35686e04c79a516f1bb.jpg\",\n             \"geoCoordinates\": {\n               \"latitude\": 36.1379,\n               \"longitude\": -115.1659\n               },\n               \"ticketPricing\": {\n                 \"price\": 0,\n                 \"unit\": \"USD\"\n                 },\n               \"rating\": 4.2,\n               \"timeTravel\":\"Location at Hotel\"\n        },\n          {\n            \"placeName\": \"Ethel M Chocolate Factory and Botanical Cactus Garden\",\n            \"placeDetails\": \"Free samples and beautiful cactus gardens. (Slightly outside of the strip but worth a visit)\",\n             \"placeImageUrl\": \"https://www.travelnevada.com/wp-content/uploads/2018/05/Ethel-M-Chocolate-Factory-and-Botanical-Garden.jpg\",\n              \"geoCoordinates\":{\n                  \"latitude\": 36.0627,\n                  \"longitude\": -115.0942\n                },\n                \"ticketPricing\":{\n                   \"price\":0,\n                   \"unit\":\"USD\"\n                },\n              \"rating\": 4.5,\n              \"timeTravel\":\"15-20 Minutes drive from the Hotel\"\n             },\n             {\n             \"placeName\":\"Shopping and Souvenirs\",\n             \"placeDetails\": \"Pick up some budget-friendly souvenirs at various shops on the strip before heading out\",\n             \"placeImageUrl\":\"https://s.hdnux.com/photos/01/10/17/30/18982973/3/rawImage.jpg\",\n             \"geoCoordinates\":{\n                \"latitude\": 36.1164,\n                \"longitude\": -115.1731\n              },\n              \"ticketPricing\": {\n               \"price\": \"varies\",\n               \"unit\": \"USD\"\n              },\n               \"rating\":4.2,\n               \"timeTravel\":\"30-45 Minutes Travel from Ethel M\"\n             }\n        ]\n      }\n    }\n}\n```\n**Important Notes for Budget Travel:**\n\n*   **Hotel Deals:**  Prices fluctuate. Check for deals online and consider visiting during the weekdays or off-season.\n*   **Food:** To save on food, consider eating at budget-friendly restaurants, utilize your hotel fridge, and make use of quick meal options such as grocery store deli and sandwiches.\n*   **Transportation:**  Walking is a great option on the Strip. Use the bus if needed. Avoid expensive taxis and ride-sharing services when possible.\n*   **Free Activities:** Vegas has a lot of free attractions; take advantage of them.\n*   **Gambling:** Set a strict budget and stick to it. Consider it entertainment, not a way to make money.\n*   **Hydration:** Bring a refillable water bottle.\n*   **Flexibility:** Be ready to adjust your plans based on your budget and time constraints.\n\nThis plan aims to give you a taste of the Las Vegas experience without breaking the bank. Adjust it to your preferences and have a great trip!\n"},
          ],
        },
      ],
    });
  
